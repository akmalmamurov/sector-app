"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5215],{8786:(e,t,s)=>{s.d(t,{pj:()=>m,WE:()=>j,i1:()=>f,M5:()=>y});var l=s(95155),a=s(26715),r=s(28755),c=s(10518),n=s(87239),i=s(7114),o=s(22073),d=s(93473);let x=e=>(0,l.jsx)("svg",{width:19,height:17,viewBox:"0 0 19 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{d:"M7.89519 15.5626C7.89519 16.5511 6.82508 17.1689 5.969 16.6747C5.1129 16.1804 5.1129 14.9447 5.969 14.4505C6.16421 14.3378 6.38564 14.2784 6.61105 14.2784C7.32026 14.2784 7.89519 14.8534 7.89519 15.5626ZM14.9579 14.2784C13.9694 14.2784 13.3515 15.3485 13.8458 16.2046C14.3401 17.0607 15.5757 17.0607 16.07 16.2046C16.1827 16.0094 16.242 15.788 16.242 15.5626C16.242 14.8534 15.6671 14.2784 14.9579 14.2784ZM18.787 4.17716L16.7292 11.5834C16.4967 12.4147 15.7408 12.9907 14.8776 12.9943H6.94493C6.07908 12.9939 5.31935 12.4172 5.08616 11.5834L2.2707 1.43715H0.832479C0.338219 1.43715 0.0292983 0.90209 0.276432 0.474048C0.39113 0.275387 0.603076 0.153008 0.832479 0.153015H2.75867C3.04717 0.152963 3.30029 0.345338 3.37746 0.623332L4.13831 3.36334H18.1682C18.5928 3.36326 18.9006 3.76801 18.787 4.17716ZM17.3231 4.64747H4.49546L6.32614 11.2399C6.40332 11.5179 6.65643 11.7102 6.94493 11.7102H14.8776C15.1661 11.7102 15.4193 11.5179 15.4964 11.2399L17.3231 4.64747Z",fill:"currentColor"})});var u=s(96834),p=s(57141),h=s(59950);let m=e=>{let{product:t,count:s,saved:m}=e,{addToCart:v,cart:j,auth:g}=(0,i.A)(),f=(0,a.jE)(),{data:y=[]}=(0,r.I)({queryKey:["cart"],queryFn:h.X,enabled:g&&0===j.length}),b=g?y:j,N=(0,o.v6)(b,t),w=async()=>{try{g?(await u.A.post(p.iI,{productId:t.id},{params:{count:s}}),f.invalidateQueries({queryKey:["cart"]})):v({...t,count:s||1}),(0,d.P0)({message:"Товар ".concat(t.articul," добавлен в корзину"),type:"success",href:"/cart",hrefName:"Перейти в корзине"})}catch(e){(0,d.Qg)("Не удалось добавить товар в корзину"),console.error(e)}};return(0,l.jsx)("button",{type:"button",onClick:w,disabled:N,className:"w-[42px] h-[42px] bg-lightBg rounded-full flex items-center justify-center ".concat(m?"hover:bg-cerulean hover:text-white hoverEffect text-cerulean group":""),children:N?(0,l.jsx)(c.A,{className:"w-5 h-5 text-cerulean ".concat(m&&"group-hover:text-white"),strokeWidth:2.65}):m?(0,l.jsx)(x,{}):(0,l.jsx)(n.Jl,{})})};var v=s(59434);let j=e=>{let{product:t,className:s}=e,{toggleCompare:a,compares:r}=(0,i.A)(),c=(0,o.v6)(r,t);return(0,l.jsx)("button",{type:"button",onClick:()=>{a(t),c?(0,d.Te)("Удалено из сравнения"):(0,d.Te)("Добавлено в сравнение")},children:c?(0,l.jsx)(n.Jh,{className:(0,v.cn)(s,"w-[20px] h-[20px] sm:w-[24px] sm:h-[24px] lg:w-[28px] lg:h-[28px]")}):(0,l.jsx)(n.HD,{className:(0,v.cn)(s,"w-[20px] h-[20px] sm:w-[24px] sm:h-[24px] lg:w-[28px] lg:h-[28px] text-darkSoul")})})};var g=s(71873);let f=e=>{let{product:t,className:s}=e,{toggleFavorites:c,favorites:x,auth:h}=(0,i.A)(),m=(0,a.jE)(),{data:j=[]}=(0,r.I)({queryKey:["saved"],queryFn:()=>(0,g.G5)(),enabled:h}),f=(0,o.v6)(h?j:x,t),y=async()=>{h?(await u.A.post(p.f_,{productId:t.id}),m.invalidateQueries({queryKey:["saved"]}),f?(0,d.Te)("Товар ".concat(t.articul," удален из избранного")):(0,d.P0)({message:"Товар ".concat(t.articul," добавлен в избранное"),type:"success",href:"/profile/favorites",hrefName:"Перейти в избранное"})):(f?(0,d.Te)("Товар ".concat(t.articul," удален из избранного")):(0,d.P0)({message:"Товар ".concat(t.articul," добавлен в избранное"),type:"success",href:"/profile/favorites",hrefName:"Перейти в избранное"}),c(t))};return(0,l.jsx)("button",{type:"button",onClick:y,className:"text-darkSoul",children:f?(0,l.jsx)(n.Wu,{className:(0,v.cn)(s,"text-dangerColor")}):(0,l.jsx)(n.C3,{className:(0,v.cn)(s)})})},y=e=>{let{product:t,className:s}=e,{toggleFavorites:c,favorites:x,auth:h}=(0,i.A)(),m=(0,a.jE)(),{data:j=[]}=(0,r.I)({queryKey:["saved"],queryFn:()=>(0,g.G5)(),enabled:h}),f=(0,o.v6)(h?j:x,t),y=async()=>{h?(await u.A.post(p.f_,{productId:t.id}),m.invalidateQueries({queryKey:["saved"]}),f?(0,d.Te)("Удалено из избранного"):(0,d.Te)("Добавлено в избранное")):(f?(0,d.Te)("Удалено из избранного"):(0,d.Te)("Добавлено в избранное"),c(t))};return(0,l.jsxs)("button",{type:"button",onClick:y,className:(0,v.cn)("flex items-center gap-2 group",s),children:[(0,l.jsx)("span",{className:"text-xs group-hover:opacity-70 duration-200 ease-in-out",children:"перенести в избранное"}),f?(0,l.jsx)(n.Wu,{className:"text-dangerColor text-sm w-[18px] h-[18px] group-hover:opacity-70 duration-200 ease-in-out"}):(0,l.jsx)(n.C3,{className:"text-textColor text-sm w-[18px] h-[18px] group-hover:opacity-70 duration-200 ease-in-out"})]})}},11133:(e,t,s)=>{s.d(t,{A:()=>l});let l=(0,s(40157).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},51010:(e,t,s)=>{s.d(t,{A:()=>g});var l=s(95155),a=s(77223),r=s(77381),c=s(67995),n=s(87239),i=s(22073),o=s(66766),d=s(57141),x=s(22346),u=s(6874),p=s.n(u),h=s(8786),m=s(12115),v=s(17296),j=s(47131);let g=e=>{let{handleDeleteClick:t,cart:s,selectedItems:u,toggleSingleItem:g,setQuantity:f,setValue:y,getValues:b}=e,[N,w]=(0,m.useState)(null),C=(0,j.A)(e=>e.selectedGuarantees),k=(0,j.A)(e=>e.setSelectedGuarantee),A=(0,j.A)(e=>e.addGaranteePrice),S=e=>{w(t=>t===e?null:e)};return(0,l.jsx)("div",{className:"flex flex-col gap-[23px]",children:null==s?void 0:s.map(e=>{var s,j;return(0,l.jsxs)(m.Fragment,{children:[(0,l.jsxs)("div",{className:"p-[15px] bg-white border border-superSilver shadow-sectionShadow text-textColor spacy-4",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("input",{type:"checkbox",checked:null==u?void 0:u.includes(e.id),onChange:()=>g(e.id)}),(0,l.jsxs)("div",{className:"flex h-[26px] items-center",children:[(0,l.jsx)(h.M5,{product:e}),(0,l.jsx)("div",{className:"w-[2px] h-full bg-superSilver mx-[15px]"}),(0,l.jsxs)("button",{type:"button",className:"flex items-center gap-2 group",onClick:()=>t(e.id),children:[(0,l.jsx)("span",{className:"text-xs group-hover:opacity-70 duration-200 ease-in-out",children:"удалить из корзины"}),(0,l.jsx)("span",{children:(0,l.jsx)(a.A,{className:"w-[18px] h-[18px] group-hover:opacity-70 duration-200 ease-in-out"})})]})]})]}),(0,l.jsx)(x.w,{className:"my-2"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("div",{className:"border w-[130px] h-[130px] border-superSilver",children:(0,l.jsx)(o.default,{src:"".concat(d.V2,"/").concat(e.mainImage),alt:e.title,width:100,height:100,className:"p-2 w-full h-full"})}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex h-fit gap-[15px]",children:[(0,l.jsx)("p",{className:"text-xs text-wasabiColor",children:e.articul}),(0,l.jsx)("span",{className:"cursor-pointer text-explosiveGrey hover:text-cerulean hoverEffect",onClick:()=>(0,i.lW)(e.articul,"Артикул ".concat(e.articul," скопирован в буфер обмена")),children:(0,l.jsx)(n.Td,{})})]}),(0,l.jsxs)("div",{className:"flex h-fit gap-10 items-start justify-between w-full",children:[(0,l.jsx)(p(),{href:"/catalog/".concat(e.subcatalog.slug,"/").concat(e.category.slug,"/").concat(e.slug),className:"text-base text-textColor hover:text-cerulean hoverEffect ",children:e.title}),(0,l.jsx)("span",{className:"cursor-pointer text-explosiveGrey hover:text-cerulean hoverEffect",onClick:()=>(0,i.lW)(e.title,"Наименование скопировано в буфер обмена"),children:(0,l.jsx)(n.Td,{})})]})]}),(0,l.jsx)("div",{className:"mt-[15px]",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{className:"w-[90px] h-[42px] relative",children:[(0,l.jsx)("input",{type:"number",value:e.count,className:"w-[90px] h-[42px] text-center pr-3 border focus:outline-none text-textColor",onChange:t=>{let s=Number(t.target.value);s<1?s=1:s>9999&&(s=9999),f(e.id,s)}}),(0,l.jsxs)("div",{className:"absolute top-0 h-full right-[10px] flex flex-col justify-center",children:[(0,l.jsx)("span",{className:"cursor-pointer",onClick:()=>f(e.id,Number(e.count)+1),children:(0,l.jsx)(r.A,{strokeWidth:2.75,size:16})}),(0,l.jsx)("button",{type:"button",className:"cursor-pointer disabled:opacity-60 disabled:cursor-default",onClick:()=>f(e.id,Number(e.count)-1),disabled:1===e.count,children:(0,l.jsx)(r.A,{size:16,strokeWidth:2.75,className:"rotate-180"})})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)(c.A,{amount:e.price,className:"text-2xl text-textColor font-normal"})})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:["0"===e.inStock?(0,l.jsx)("span",{children:"Под заказ"}):(0,l.jsxs)("p",{children:[e.inStock," шт в наличии"]}),(null==e||null==(s=e.garantees)?void 0:s.length)>0&&(0,l.jsxs)("button",{type:"button",onClick:()=>S(e.id),className:"w-[154px] h-[26px] flex items-center justify-center gap-1 bg-bleachedSilk text-xs font-semibold leading-[18px]",children:[(0,l.jsx)(n.se,{}),"Добавить гарантию"]})]})]})})]})]})]}),N===e.id&&(0,l.jsx)(v.A,{productId:e.id,isOpen:!0,toggleModal:()=>S(e.id),getValues:b,garantee:e.garantees,count:e.count||1,setValue:y,addGaranteePrice:A,selected:null!=(j=C[e.id])?j:"0",setSelected:t=>k(e.id,t)})]},e.id)})})}},59950:(e,t,s)=>{s.d(t,{X:()=>r});var l=s(57141),a=s(96834);let r=async()=>{try{return(await (0,a.A)(l.si)).data.data||[]}catch(e){return console.log(e),[]}}},66766:(e,t,s)=>{s.d(t,{default:()=>a.a});var l=s(71469),a=s.n(l)},71469:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return i},getImageProps:function(){return n}});let l=s(88229),a=s(38883),r=s(33063),c=l._(s(51193));function n(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:c.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let i=r.Image},77223:(e,t,s)=>{s.d(t,{A:()=>l});let l=(0,s(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},95215:(e,t,s)=>{s.d(t,{A:()=>m});var l=s(95155),a=s(62177),r=s(10518),c=s(11133),n=s(25318),i=s(28755),o=s(7114),d=s(32825),x=s(4988),u=s(51010),p=s(71873),h=s(12115);let m=e=>{let{isAllChecked:t,toggleAllItems:s,setQuantity:m,cart:v,toggleSingleItem:j,selectedItems:g,deleteCart:f,resetCart:y,errors:b,control:N,watch:w,setValue:C,cartForm:k,getValues:A}=e,{favorites:S}=(0,o.A)(),[I,q]=(0,h.useState)(""),[M,E]=(0,h.useState)(!1),{data:T=[]}=(0,i.I)({queryKey:["region",I],queryFn:()=>(0,p.JN)(I)}),P=()=>[...T.map(e=>null==e?void 0:e.name),"Ташкент"],_=w("city"),G=_&&P().includes(_);(0,h.useEffect)(()=>{I&&0===T.length&&E(!0)},[I,T]);let{isConfirmOpen:V,message:H,onConfirm:W,closeModal:z,handleDeleteAll:K,handleDeleteClick:F}=(0,x.nu)({cart:v,selectedItems:g,setValue:C,cartForm:k,resetCart:y,deleteCart:f});return(0,l.jsxs)("div",{className:"col-span-3",children:[(0,l.jsxs)("div",{className:"bg-white border border-superSilver shadow-sectionShadow py-[23px] px-[20px]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("h5",{className:"text-textColor text-base",children:"Выберите город доставки"}),G?(0,l.jsx)("div",{className:"w-5 h-5 bg-green-600 rounded-full flex items-center justify-center",children:(0,l.jsx)(r.A,{className:"w-3 h-3 text-white"})}):(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.A,{className:"w-4 h-4 text-orangeSun"}),(0,l.jsx)("p",{className:"text-xs",children:"Уточните город из списка"})]})]}),(0,l.jsxs)("div",{className:"mt-4 mb-2 relative",children:[(0,l.jsx)(a.xI,{name:"city",control:N,rules:{required:"Выберите город из предложенного списка",validate:e=>P().includes(e)||"Город не найден"},render:e=>{let{field:t}=e;return(0,l.jsx)("input",{type:"text",className:"inputs py-2.5 capitalize",placeholder:"Начните вводить название города",value:t.value||I,onChange:e=>{let s=e.target.value;q(s),t.onChange(s),E(!0)}})}}),b.city&&(0,l.jsx)("p",{className:"text-red-500 text-sm mt-1",children:b.city.message}),M&&(null==I?void 0:I.length)>0&&(null==T?void 0:T.length)>0&&(0,l.jsx)("div",{className:"absolute w-full bg-white border border-superSilver shadow-md z-10",children:null==T?void 0:T.map(e=>(0,l.jsx)("div",{onClick:()=>{C("city",null==e?void 0:e.name,{shouldValidate:!0}),q(""),E(!1)},className:"px-4 py-2 hover:bg-superSilver cursor-pointer",children:null==e?void 0:e.name},null==e?void 0:e.id))})]}),(0,l.jsxs)("button",{type:"button",className:"px-[15px] h-[30px] flex items-center justify-center rounded-full text-xs ".concat("Ташкент"===_?"bg-cerulean text-white":"bg-superSilver text-textColor"),onClick:()=>{C("city","Ташкент",{shouldValidate:!0}),q(""),E(!1)},children:["Ташкент","Ташкент"===_&&(0,l.jsx)("span",{className:"ml-1",onClick:e=>{e.stopPropagation(),C("city","",{shouldValidate:!0})},children:(0,l.jsx)(n.A,{className:"w-4 h-4"})})]})]}),(0,l.jsx)("div",{className:"bg-white border-superSilver border shadow-sectionShadow py-[23px] px-[20px] text-textColor my-[23px]",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{id:"all-check",type:"checkbox",checked:t,onChange:s,className:"bg-green-600 cursor-pointer w-[18px] h-[18px] checked:bg-green-600"}),(0,l.jsx)("label",{htmlFor:"all-check",className:"cursor-pointer",children:"выбрать все"})]}),(0,l.jsx)("span",{onClick:K,className:"text-sm font-normal text-textColor cursor-pointer",children:"Очистить корзину"})]})}),(0,l.jsx)(u.A,{cart:v,handleDeleteClick:F,setQuantity:m,selectedItems:g,toggleSingleItem:j,favorites:S,setValue:C,getValues:A}),(0,l.jsx)(d.uo,{isOpen:V,message:H,onConfirm:W,closeModal:z})]})}}}]);