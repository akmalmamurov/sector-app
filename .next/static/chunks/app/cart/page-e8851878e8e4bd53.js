(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4005],{7390:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l=(0,s(40157).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},49140:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var l=s(95155),a=s(7390),r=s(11133),i=s(6874),c=s.n(i),n=s(35695),d=s(12115),o=s(67995),x=s(7114),u=s(32825),m=s(4988),p=s(47131);let h=e=>{let{selectedCards:t,setValue:s}=e,i=(0,m.YU)(),{selectedCardsList:h,auth:f}=(0,x.A)(),j=(0,p.A)(e=>e.garanteePrice),y=t.reduce((e,t)=>e+(t.price||0)*(t.count||1),0)+(j||0);(0,d.useEffect)(()=>{s&&s("total",y)},[y,s]);let[b,v]=(0,d.useState)(!1),g=()=>v(!b),N=(0,n.usePathname)();return(0,l.jsxs)("div",{className:"bg-white border border-superSilver shadow-sectionShadow p-[23px] sticky ".concat("up"===i?"top-[140px]":"top-2"),children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,l.jsxs)("p",{className:"text-[18px] leading-[27px] font-normal text-stoneCold",children:["Моя корзина\xa0",(0,l.jsxs)("span",{children:["(",t.length,")"]})]}),(0,l.jsx)(a.A,{className:"text-[#0054AEFF] w-[24px] h-[24px]"})]}),(0,l.jsxs)("div",{className:"font-normal text-xs text-textColor flex justify-between items-center mb-3",children:[(0,l.jsx)("p",{children:"Вес"}),(0,l.jsx)("span",{children:"8.56 кг"})]}),(0,l.jsxs)("div",{className:"font-normal text-xs text-textColor flex justify-between items-center mb-3",children:[(0,l.jsx)("p",{children:"Объём"}),(0,l.jsxs)("span",{children:["0.0348 м",(0,l.jsx)("sup",{children:"3"})]})]}),"/cart/delivery"===N&&(0,l.jsxs)("button",{type:"button",className:"bg-white border text-xs font-normal flex items-center gap-3 px-2 border-cerulean hover:opacity-90 transition-opacity text-cerulean w-full py-[14.5px]",children:[(0,l.jsx)(r.A,{className:"w-6 h-6"}),"Доставка будет включена в счёт"]}),(0,l.jsxs)("div",{className:"flex justify-between items-center py-3 border-t border-superSilver",children:[(0,l.jsx)("p",{className:"text-textColor font-normal text-[18px] leading-[27px]",children:"Итого"}),(0,l.jsx)(o.A,{className:"text-cerulean font-normal text-[18px] leading-[27px]",amount:t.length?y:0})]}),"/cart"===N&&(0,l.jsxs)(d.Fragment,{children:[(0,l.jsx)("button",{type:f?"submit":"button",disabled:!t.length,onClick:f?()=>{h(t)}:g,className:"bg-cerulean hover:opacity-90 transition-opacity text-white w-full py-[13px] mb-3 disabled:opacity-50 font-semibold",children:"Оформить заказ"}),(0,l.jsxs)("p",{className:"text-xs font-normal text-textColor",children:["Прочитал и\xa0согласен с\xa0"," ",(0,l.jsx)(c(),{className:"text-cerulean hover:underline",href:"/",children:"условиями пользовательского соглашения."})]})]})]}),(0,l.jsx)(u.zC,{isOpen:b,handleOpen:g})]})}},72843:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var l=s(95155),a=s(62177),r=s(12115),i=s(35695),c=s(26715),n=s(28755),d=s(57141),o=s(95215),x=s(49140),u=s(75001),m=s(47131),p=s(7114),h=s(4988),f=s(59950),j=s(96834);function y(){let{cart:e,setQuantity:t,deleteCart:s,resetCart:y,auth:b}=(0,p.A)(),v=(0,m.A)(e=>e.addCartForm),g=(0,m.A)(e=>e.cartForm),N=(0,c.jE)(),{handleSubmit:w,control:A,setValue:C,watch:k,getValues:F,formState:{errors:S}}=(0,a.mN)({defaultValues:{city:(null==g?void 0:g.city)||"",total:0,productDetails:[]}}),{data:q=[]}=(0,n.I)({queryKey:["cart"],queryFn:()=>(0,f.X)(),enabled:b}),I=b?q:e,E=(0,i.useRouter)(),_=async()=>{b?(await j.A.delete(d.r3),N.invalidateQueries({queryKey:["cart"]})):y()},z=async e=>{b?(await j.A.post(d.iI,{productId:e}),N.invalidateQueries({queryKey:["cart"]})):s(e)},D=async(e,s)=>{if(b){if(s>=1)try{await j.A.post(d.tb,{productId:e,count:s}),N.invalidateQueries({queryKey:["cart"]})}catch(e){console.error("Корзинани янгилашда хатолик:",e)}}else t(e,s)},{isClient:K,selectedItems:O,toggleAllItems:Q,toggleSingleItem:V,isAllChecked:P,selectedCards:R}=(0,h.vL)(I);return K?(0,l.jsx)(r.Fragment,{children:(null==I?void 0:I.length)>0?(0,l.jsx)("form",{onSubmit:w(e=>{let{productDetails:t,...s}=e,l=t.map(e=>{let{garanteeId:t,...s}=e;return t&&"0"!==t?{...s,garanteeId:t}:s}),a={...s,productDetails:l};v(a),console.log(a),E.push("/cart/contacts")}),children:(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-[23px]",children:[(0,l.jsx)("div",{className:"col-span-3",children:(0,l.jsx)(o.A,{control:A,errors:S,setValue:C,watch:k,cart:b?q:e,selectedItems:O,toggleAllItems:Q,toggleSingleItem:V,isAllChecked:P,setQuantity:D,deleteCart:z,resetCart:_,cartForm:g,getValues:()=>F("productDetails")})}),(0,l.jsx)("div",{className:"col-span-1",children:(0,l.jsx)(x.A,{selectedCards:R,setValue:C})})]})}):(0,l.jsx)("div",{className:"",children:(0,l.jsx)("h1",{className:"text-2xl font-semibold text-stoneCold",children:"Корзина пуста"})})}):(0,l.jsx)(u.D,{})}},74323:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var l=s(95155),a=s(59434);let r=e=>{let{className:t}=e;return(0,l.jsx)("div",{className:(0,a.cn)("absolute left-0 right-0 top-0 inset-x-0 h-1 z-50",t),children:(0,l.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-blue-500 via-purple-600 to-purple-500 animate-cart-loading"})})}},75001:(e,t,s)=>{"use strict";s.d(t,{R:()=>i,D:()=>a});var l=s(95155);let a=()=>(0,l.jsx)("div",{className:"fixed top-0 left-0 w-full h-1 z-50",children:(0,l.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-blue-500 via-purple-600 to-purple-500 animate-loading-bar"})});var r=s(87239);let i=()=>(0,l.jsx)("div",{className:"fixed top-0 left-0 w-full min-h-screen z-50 bg-white p-10 flex  items-center justify-center",children:(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)(r.hz,{className:"animate-spin w-10 h-10"}),(0,l.jsx)("p",{className:"mt-4 text-black text-lg",children:"Загрузка"})]})});s(74323)},81028:(e,t,s)=>{Promise.resolve().then(s.bind(s,72843))}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,6874,9683,3568,5165,65,5106,4856,8410,1342,4443,7766,7239,3671,1428,5215,8441,1684,7358],()=>t(81028)),_N_E=e.O()}]);