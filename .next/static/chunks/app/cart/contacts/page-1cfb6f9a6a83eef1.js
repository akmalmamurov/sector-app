(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8091],{450:(e,t,s)=>{Promise.resolve().then(s.bind(s,47523))},47523:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var l=s(95155),r=s(12115),a=s(48173),n=s.n(a),o=s(62335),i=s(69606),d=s(76046),c=s(27193),x=s(45910),m=s(12527),p=s(28155),h=s(79380),u=s(33900),f=s(98986);let b=e=>(0,l.jsxs)("svg",{width:21,height:21,viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"M10.6016 0.900024C5.08756 0.900024 0.601562 5.38602 0.601562 10.9C0.601562 16.414 5.08756 20.9 10.6016 20.9C16.1156 20.9 20.6016 16.414 20.6016 10.9C20.6016 5.38602 16.1156 0.900024 10.6016 0.900024ZM10.6016 18.9C6.19056 18.9 2.60156 15.311 2.60156 10.9C2.60156 6.48902 6.19056 2.90002 10.6016 2.90002C15.0126 2.90002 18.6016 6.48902 18.6016 10.9C18.6016 15.311 15.0126 18.9 10.6016 18.9Z",fill:"#0054AE"}),(0,l.jsx)("path",{d:"M7.10156 10.9C7.92999 10.9 8.60156 10.2285 8.60156 9.40002C8.60156 8.57159 7.92999 7.90002 7.10156 7.90002C6.27313 7.90002 5.60156 8.57159 5.60156 9.40002C5.60156 10.2285 6.27313 10.9 7.10156 10.9Z",fill:"#0054AE"}),(0,l.jsx)("path",{d:"M14.0946 10.886C14.9192 10.886 15.5876 10.2176 15.5876 9.39302C15.5876 8.56846 14.9192 7.90002 14.0946 7.90002C13.27 7.90002 12.6016 8.56846 12.6016 9.39302C12.6016 10.2176 13.27 10.886 14.0946 10.886Z",fill:"#0054AE"}),(0,l.jsx)("path",{d:"M10.6016 16.9C14.6016 16.9 15.6016 12.9 15.6016 12.9H5.60156C5.60156 12.9 6.60156 16.9 10.6016 16.9Z",fill:"#0054AE"})]});var j=s(48999),g=s(89009);let v=r.forwardRef((e,t)=>{let{value:s,onChange:r,id:a,className:n,defaultValue:o,...i}=e;return(0,l.jsx)(g._g,{mask:"+998 00 000 0000",definitions:{0:/\d/},unmask:!1,placeholderChar:"_",lazy:!1,defaultValue:o,value:s,onAccept:e=>r(e),inputRef:t,id:a,className:n,...i})});v.displayName="PhoneInput";var N=s(18403),w=s(11349),C=s(29516),y=s(89033),A=s(1734),k=s(47640);let S=()=>{let{selected:e}=(0,m.A)(),t=(0,k.A)(e=>e.contactForm),[s,a]=(0,r.useState)((null==t?void 0:t.phone.toString())||"+998 __ ___ ____"),[g,S]=(0,r.useState)(""),F=(0,w.Nu)(),{data:_=[]}=(0,o.I)({queryKey:["contragents",g],queryFn:()=>(0,y.WU)(g),enabled:F});console.log(_);let E=(null==_?void 0:_.kontragents)||[],I=(0,k.A)(e=>e.addContactForm),Z=(0,d.useRouter)(),[M,O]=(0,r.useState)(!1),z=()=>O(!M),{handleSubmit:L,register:Q,setValue:q,formState:{errors:K,submitCount:W,isValid:J}}=(0,i.mN)({defaultValues:{kontragentId:"",firstname:(null==t?void 0:t.firstname)||"",lastname:(null==t?void 0:t.lastname)||"",fullname:(null==t?void 0:t.fullname)||"",email:(null==t?void 0:t.email)||"",phone:(null==t?void 0:t.phone)||""}});if(!F)return null;let R=W>0&&(!s||s.includes("_")||s.length<13);return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("form",{noValidate:!0,onSubmit:L(e=>{var t;let l=s.replace(/[^0-9]/g,""),r={...e,phone:l,...e.fullname&&(null===(t=e.fullname)||void 0===t?void 0:t.length)>0&&{fullname:e.fullname}};console.log(r),I(r),Z.push("/cart/delivery")}),children:[(0,l.jsx)("input",{type:"hidden",...Q("kontragentId",{required:"Пожалуйста, выберите контрагента"})}),(0,l.jsxs)("div",{className:"grid grid-cols-4 gap-[23px]",children:[(0,l.jsxs)("div",{className:"col-span-3 bg-white border shadow-sectionShadow py-[23px] px-[20px]",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)(n(),{href:"/cart",className:"flex items-center gap-2 text-stoneCold text-xs group",children:[(0,l.jsx)("span",{className:"group-hover:underline",children:"Назад к корзине"}),(0,l.jsx)(h.A,{width:15,height:11,className:"text-textColor"})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-3 pb-7",children:[(0,l.jsx)("h3",{className:"font-normal text-textColor text-[17px] leading-[20.5px]",children:"Выберите контрагента"}),(0,l.jsx)("div",{className:"bg-greenLight w-[18px] h-[18px] rounded-full flex items-center justify-center",children:(0,l.jsx)(c.A,{className:"text-white",strokeWidth:5,size:8})})]}),(0,l.jsxs)("div",{className:"relative w-full mb-6",children:[(0,l.jsx)(u.p,{type:"text",placeholder:"Поиск контрагента",className:"pr-10 text-base h-[41px] rounded-none",onChange:e=>S(e.target.value),value:g}),(0,l.jsx)(j.WI,{color:"#333333",className:"absolute right-3 top-1/2 -translate-y-1/2 text-darkSoul"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 border-b border-superSilver pb-8 gap-[22px] w-full ",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("button",{type:"button",onClick:z,className:" min-h-[229px]  cursor-pointer bg-custom border border-dashed ".concat(!(null==E?void 0:E.length)&&(null==K?void 0:K.kontragentId)?"border-dangerColor":"border-superSilver"," flex justify-center items-center flex-col gap-2"),children:[(0,l.jsx)(x.A,{className:"text-weekColor w-10 h-10"}),(0,l.jsx)("p",{className:"text-weekColor mt-2",children:"Добавить контрагенты"})]}),!(null==E?void 0:E.length)&&(null==K?void 0:K.kontragentId)&&(0,l.jsx)(N.Kw,{children:"Пожалуйста, выберите контрагента"})]}),(0,l.jsx)(A.I,{contrAgents:E,setValue:q})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 pb-5 mt-8",children:[(0,l.jsx)("h3",{className:"font-normal text-textColor text-[17px] leading-[20.5px]",children:"Получатель"}),J&&!R&&(0,l.jsx)("div",{className:"bg-greenLight w-[18px] h-[18px] rounded-full flex items-center justify-center",children:(0,l.jsx)(c.A,{className:"text-white",strokeWidth:5,size:8})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-10",children:[(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)(f.J,{htmlFor:"lastname",className:"text-textColor font-normal text-sm flex gap-1 pb-2",children:["Фамилия",(0,l.jsx)("span",{className:"text-cerulean text-sm font-normal",children:"*"})]}),(0,l.jsx)(N.ZQ,{name:"lastname",register:Q,error:null==K?void 0:K.lastname}),(null==K?void 0:K.lastname)&&(0,l.jsx)(N.Kw,{children:"Укажите контактные данные"})]}),(0,l.jsxs)("div",{className:"relative w-full",children:[(0,l.jsxs)(f.J,{htmlFor:"firstname",className:"text-textColor font-normal text-sm flex gap-1 pb-2",children:["Имя",(0,l.jsx)("span",{className:"text-cerulean text-sm font-normal",children:"*"})]}),(0,l.jsx)(N.ZQ,{name:"firstname",register:Q,error:null==K?void 0:K.firstname}),K.firstname&&(0,l.jsx)("p",{className:"text-red-500 text-xs font-normal",children:"Укажите контактные данные"})]}),(0,l.jsxs)("div",{className:"relative w-full",children:[(0,l.jsx)(f.J,{htmlFor:"fullname",className:"text-textColor font-normal text-sm flex gap-1 pb-2",children:"Отчество"}),(0,l.jsx)(N.ZQ,{name:"fullname",register:Q,required:!1})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 border border-cerulean p-3.5 mb-6",children:[(0,l.jsx)(b,{className:"w-[20px] h-[20px]"}),(0,l.jsx)("p",{className:"text-cerulean text-xs font-normal",children:"Пожалуйста, укажите полное имя получателя, чтобы не возникло трудностей при получении заказа."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3 pb-10 mb-6 border-b border-superSilver",children:[(0,l.jsxs)("div",{className:" w-full",children:[(0,l.jsxs)(f.J,{htmlFor:"phoneNumber",className:"text-textColor font-normal text-sm flex gap-1 pb-2",children:["Контактный телефон",(0,l.jsx)("span",{className:"text-cerulean text-sm font-normal",children:"*"})]}),(0,l.jsx)(v,{id:"phoneNumber",value:s,onChange:a,className:"border ".concat(R?"border-dangerColor hover:border-dangerColor/50":"border-superSilver hover:border-cerulean/50"," py-2 px-[15px] w-full focus:outline-none focus:border-cerulean")}),R&&(0,l.jsx)("p",{className:"text-red-500 text-xs font-normal",children:"Укажите контактные данные"})]}),(0,l.jsxs)("div",{className:" w-full",children:[(0,l.jsxs)(f.J,{htmlFor:"email",className:"text-textColor font-normal text-sm flex gap-1 pb-2",children:["Email",(0,l.jsx)("span",{className:"text-cerulean text-sm font-normal",children:"*"})]}),(0,l.jsx)(N.ZQ,{name:"email",register:Q,error:K.email,type:"email"}),K.email&&(0,l.jsx)("p",{className:"text-red-500 text-xs font-normal",children:"Укажите контактные данные"})]})]}),(0,l.jsx)("div",{className:"col-span-2",children:(0,l.jsxs)("button",{type:"submit",className:"bg-cerulean hover:opacity-90 transition-opacity px-6 py-2 text-base font-semibold text-white flex items-center justify-center gap-2",children:[(0,l.jsx)(j.Kj,{color:"#fff",className:"w-5 h-5"}),"Перейти к доставке"]})})]})]}),(0,l.jsx)("div",{className:"col-span-1",children:(0,l.jsx)(p.A,{selectedCards:e})})]})]}),(0,l.jsx)(C.vm,{isOpen:M,toggleOpen:z})]})}},79380:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(95155);let r=e=>(0,l.jsx)("svg",{width:16,height:12,viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{d:"M4.29703 7.19977L6.58992 9.49266C6.98044 9.88318 6.98044 10.5164 6.58992 10.9069C6.1994 11.2974 5.56623 11.2974 5.17571 10.9069L1.17571 6.90687C0.785181 6.51635 0.785181 5.88318 1.17571 5.49266L5.17571 1.49266C5.56623 1.10214 6.1994 1.10214 6.58992 1.49266C6.98044 1.88319 6.98044 2.51635 6.58992 2.90687L4.29703 5.19977H13.8843C14.4357 5.19977 14.8828 5.64748 14.8828 6.19977C14.8828 6.75205 14.4357 7.19977 13.8843 7.19977H4.29703Z",fill:"currentColor"})})},1734:(e,t,s)=>{"use strict";s.d(t,{I:()=>u});var l=s(95155),r=s(12115),a=s(35906),n=s(89033),o=s(48999),i=s(11644),d=s(89095),c=s(74857),x=s(93952),m=s(29516),p=s(21567),h=s(12527);let u=(0,r.memo)(e=>{let{contrAgents:t,setValue:s,className:u}=e,[f,b]=(0,r.useState)(!1),j=()=>b(!f),g=(0,h.A)(e=>e.setAgent),[v,N]=(0,r.useState)(null),[w,C]=(0,r.useState)(""),[y,A]=(0,r.useState)([]),k=(0,a.jE)();(0,r.useEffect)(()=>{let e=t.find(e=>e.isFavorite);e&&s&&s("kontragentId",e.id),e&&g(e.id)},[t,s,g]);let S=async e=>{try{await (0,n.x4)(e),k.invalidateQueries({queryKey:["contragents"]}),s&&s("kontragentId",e),g(e)}catch(e){console.error(e),(0,i.Qg)("Ошибка обновления контрагента")}},F=async e=>{try{await c.A.delete("".concat(x.kt,"/").concat(e)),k.invalidateQueries({queryKey:["contragents"]}),(0,i.Te)("Контрагент удален")}catch(e){console.error(e),(0,i.Qg)("Ошибка удаления контрагента")}},_=(e,t,s)=>{A(e),N(t),C(s),b(!0)};return(0,l.jsx)(l.Fragment,{children:null==t?void 0:t.slice().sort((e,t)=>(t.isFavorite?1:0)-(e.isFavorite?1:0)).map(e=>(0,l.jsxs)("div",{className:(0,p.cn)("border ".concat(e.isFavorite?"border-cerulean":"border-superSilver"," relative pt-12 px-4 overflow-hidden bg-custom min-h-[229px]"),u),children:[(0,l.jsxs)("div",{className:"mb-[15px]",children:[(0,l.jsx)("h5",{className:"text-textColor text-sm mb-2",children:e.name}),(0,l.jsxs)("p",{className:"text-weekColor text-xs",children:["ИНН ",e.inn]})]}),(0,l.jsxs)("div",{className:"gap-2 flex mb-2",children:[(0,l.jsx)("span",{className:"border-b border-dashed pb-[2px] text-xs text-cerulean border-cerulean",children:"Розничная цена"}),(0,l.jsxs)("span",{onClick:()=>_(e.address,e.id,e.name),className:"border-b border-dashed pb-[2px] text-xs text-cerulean border-cerulean cursor-pointer",children:["Адреса отгрузки:\xa0",e.address.length]})]}),(0,l.jsxs)("button",{type:"button",onClick:()=>S(e.id),disabled:e.isFavorite,className:"mt-[31px] flex gap-3 items-center px-[23px] text-weekColor h-[42px] border disabled:bg-cerulean disabled:text-white disabled:border-none",children:[(0,l.jsx)(o.Sr,{}),e.isFavorite?"Выбрано":"Выбрать"]}),(0,l.jsxs)(d.AM,{children:[(0,l.jsx)(d.Wv,{asChild:!0,children:(0,l.jsx)("button",{type:"button",className:"absolute top-4 right-2 cursor-pointer w-fit",children:(0,l.jsx)(o.qU,{className:"w-6 h-6 text-darkSoul hover:text-textColor"})})}),(0,l.jsxs)(d.hl,{className:"w-[200px] p-0 rounded-none flex flex-col right-5 absolute",children:[(0,l.jsxs)("span",{onClick:()=>_(e.address,e.id,e.name),className:"cursor-pointer py-[6px] px-4 bg-white text-xs text-textColor hover:bg-superSilver hoverEffect flex items-center gap-2",children:[(0,l.jsx)("span",{children:(0,l.jsx)(o.Sp,{})}),"Адреса отгрузки:\xa0",e.address.length]}),(0,l.jsxs)("span",{onClick:()=>F(e.id),className:"cursor-pointer py-[6px] px-4 bg-white text-xs text-textColor hover:bg-superSilver hoverEffect flex items-center gap-2",children:[(0,l.jsx)("span",{className:"w-4 h-4",children:(0,l.jsx)(o.XA,{className:"w-4 h-4"})}),"Удалить"]})]})]}),(0,l.jsx)(m.h2,{isOpen:f,toggleOpen:j,name:w,contrAgentId:v||"",element:y},v)]},e.id))})});u.displayName="ContrAgent"},28155:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var l=s(95155),r=s(69553),a=s(51680),n=s(48173),o=s.n(n),i=s(76046),d=s(12115),c=s(78338),x=s(12527),m=s(29516),p=s(11349),h=s(47640);let u=e=>{let{selectedCards:t,setValue:s}=e,n=(0,p.YU)(),{selectedCardsList:u,auth:f}=(0,x.A)(),b=(0,h.A)(e=>e.garanteePrice),j=t.reduce((e,t)=>e+(t.price||0)*(t.count||1),0)+(b||0);(0,d.useEffect)(()=>{s&&s("total",j)},[j,s]);let[g,v]=(0,d.useState)(!1),N=()=>v(!g),w=(0,i.usePathname)();return(0,l.jsxs)("div",{className:"bg-white border border-superSilver shadow-sectionShadow p-[23px] sticky ".concat("up"===n?"top-[140px]":"top-2"),children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,l.jsxs)("p",{className:"text-[18px] leading-[27px] font-normal text-stoneCold",children:["Моя корзина\xa0",(0,l.jsxs)("span",{children:["(",t.length,")"]})]}),(0,l.jsx)(r.A,{className:"text-[#0054AEFF] w-[24px] h-[24px]"})]}),(0,l.jsxs)("div",{className:"font-normal text-xs text-textColor flex justify-between items-center mb-3",children:[(0,l.jsx)("p",{children:"Вес"}),(0,l.jsx)("span",{children:"8.56 кг"})]}),(0,l.jsxs)("div",{className:"font-normal text-xs text-textColor flex justify-between items-center mb-3",children:[(0,l.jsx)("p",{children:"Объём"}),(0,l.jsxs)("span",{children:["0.0348 м",(0,l.jsx)("sup",{children:"3"})]})]}),"/cart/delivery"===w&&(0,l.jsxs)("button",{type:"button",className:"bg-white border text-xs font-normal flex items-center gap-3 px-2 border-cerulean hover:opacity-90 transition-opacity text-cerulean w-full py-[14.5px]",children:[(0,l.jsx)(a.A,{className:"w-6 h-6"}),"Доставка будет включена в счёт"]}),(0,l.jsxs)("div",{className:"flex justify-between items-center py-3 border-t border-superSilver",children:[(0,l.jsx)("p",{className:"text-textColor font-normal text-[18px] leading-[27px]",children:"Итого"}),(0,l.jsx)(c.A,{className:"text-cerulean font-normal text-[18px] leading-[27px]",amount:t.length?j:0})]}),"/cart"===w&&(0,l.jsxs)(d.Fragment,{children:[(0,l.jsx)("button",{type:f?"submit":"button",disabled:!t.length,onClick:f?()=>{u(t)}:N,className:"bg-cerulean hover:opacity-90 transition-opacity text-white w-full py-[13px] mb-3 disabled:opacity-50 font-semibold",children:"Оформить заказ"}),(0,l.jsxs)("p",{className:"text-xs font-normal text-textColor",children:["Прочитал и\xa0согласен с\xa0"," ",(0,l.jsx)(o(),{className:"text-cerulean hover:underline",href:"/",children:"условиями пользовательского соглашения."})]})]})]}),(0,l.jsx)(m.zC,{isOpen:g,handleOpen:N})]})}},33900:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var l=s(95155),r=s(12115),a=s(21567);let n=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,l.jsx)("input",{type:r,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});n.displayName="Input"},89095:(e,t,s)=>{"use strict";s.d(t,{AM:()=>o,Wv:()=>i,hl:()=>d});var l=s(95155),r=s(12115),a=s(39774),n=s(21567);let o=a.bL,i=a.l9;a.Mz;let d=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:o=4,...i}=e;return(0,l.jsx)(a.ZL,{children:(0,l.jsx)(a.UC,{ref:t,align:r,sideOffset:o,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})})});d.displayName=a.UC.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,8173,5037,3194,1387,8125,9795,7245,40,6443,2430,9774,7155,8999,428,2462,8441,1517,7358],()=>t(450)),_N_E=e.O()}]);