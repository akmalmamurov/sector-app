(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8715],{14636:(e,r,t)=>{"use strict";t.d(r,{AM:()=>l,Wv:()=>i,hl:()=>d});var o=t(95155),a=t(12115),n=t(20547),s=t(59434);let l=n.bL,i=n.l9;n.Mz;let d=a.forwardRef((e,r)=>{let{className:t,align:a="center",sideOffset:l=4,...i}=e;return(0,o.jsx)(n.ZL,{children:(0,o.jsx)(n.UC,{ref:r,align:a,sideOffset:l,className:(0,s.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})});d.displayName=n.UC.displayName},20547:(e,r,t)=>{"use strict";t.d(r,{Mz:()=>B,UC:()=>G,ZL:()=>Q,bL:()=>Z,l9:()=>K});var o=t(12115),a=t(85185),n=t(6101),s=t(46081),l=t(19178),i=t(92293),d=t(25519),c=t(61285),u=t(35152),p=t(34378),x=t(28905),h=t(63655),f=t(99708),v=t(5845),m=t(38168),g=t(93795),b=t(95155),w="Popover",[j,C]=(0,s.A)(w,[u.Bk]),y=(0,u.Bk)(),[N,k]=j(w),A=e=>{let{__scopePopover:r,children:t,open:a,defaultOpen:n,onOpenChange:s,modal:l=!1}=e,i=y(r),d=o.useRef(null),[p,x]=o.useState(!1),[h,f]=(0,v.i)({prop:a,defaultProp:null!=n&&n,onChange:s,caller:w});return(0,b.jsx)(u.bL,{...i,children:(0,b.jsx)(N,{scope:r,contentId:(0,c.B)(),triggerRef:d,open:h,onOpenChange:f,onOpenToggle:o.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:p,onCustomAnchorAdd:o.useCallback(()=>x(!0),[]),onCustomAnchorRemove:o.useCallback(()=>x(!1),[]),modal:l,children:t})})};A.displayName=w;var P="PopoverAnchor",O=o.forwardRef((e,r)=>{let{__scopePopover:t,...a}=e,n=k(P,t),s=y(t),{onCustomAnchorAdd:l,onCustomAnchorRemove:i}=n;return o.useEffect(()=>(l(),()=>i()),[l,i]),(0,b.jsx)(u.Mz,{...s,...a,ref:r})});O.displayName=P;var R="PopoverTrigger",E=o.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,s=k(R,t),l=y(t),i=(0,n.s)(r,s.triggerRef),d=(0,b.jsx)(h.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":T(s.open),...o,ref:i,onClick:(0,a.m)(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?d:(0,b.jsx)(u.Mz,{asChild:!0,...l,children:d})});E.displayName=R;var F="PopoverPortal",[S,_]=j(F,{forceMount:void 0}),I=e=>{let{__scopePopover:r,forceMount:t,children:o,container:a}=e,n=k(F,r);return(0,b.jsx)(S,{scope:r,forceMount:t,children:(0,b.jsx)(x.C,{present:t||n.open,children:(0,b.jsx)(p.Z,{asChild:!0,container:a,children:o})})})};I.displayName=F;var M="PopoverContent",D=o.forwardRef((e,r)=>{let t=_(M,e.__scopePopover),{forceMount:o=t.forceMount,...a}=e,n=k(M,e.__scopePopover);return(0,b.jsx)(x.C,{present:o||n.open,children:n.modal?(0,b.jsx)(z,{...a,ref:r}):(0,b.jsx)(q,{...a,ref:r})})});D.displayName=M;var L=(0,f.TL)("PopoverContent.RemoveScroll"),z=o.forwardRef((e,r)=>{let t=k(M,e.__scopePopover),s=o.useRef(null),l=(0,n.s)(r,s),i=o.useRef(!1);return o.useEffect(()=>{let e=s.current;if(e)return(0,m.Eq)(e)},[]),(0,b.jsx)(g.A,{as:L,allowPinchZoom:!0,children:(0,b.jsx)(U,{...e,ref:l,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,a.m)(e.onCloseAutoFocus,e=>{var r;e.preventDefault(),i.current||null==(r=t.triggerRef.current)||r.focus()}),onPointerDownOutside:(0,a.m)(e.onPointerDownOutside,e=>{let r=e.detail.originalEvent,t=0===r.button&&!0===r.ctrlKey;i.current=2===r.button||t},{checkForDefaultPrevented:!1}),onFocusOutside:(0,a.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),q=o.forwardRef((e,r)=>{let t=k(M,e.__scopePopover),a=o.useRef(!1),n=o.useRef(!1);return(0,b.jsx)(U,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var o,s;null==(o=e.onCloseAutoFocus)||o.call(e,r),r.defaultPrevented||(a.current||null==(s=t.triggerRef.current)||s.focus(),r.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:r=>{var o,s;null==(o=e.onInteractOutside)||o.call(e,r),r.defaultPrevented||(a.current=!0,"pointerdown"===r.detail.originalEvent.type&&(n.current=!0));let l=r.target;(null==(s=t.triggerRef.current)?void 0:s.contains(l))&&r.preventDefault(),"focusin"===r.detail.originalEvent.type&&n.current&&r.preventDefault()}})}),U=o.forwardRef((e,r)=>{let{__scopePopover:t,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:n,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:x,onInteractOutside:h,...f}=e,v=k(M,t),m=y(t);return(0,i.Oh)(),(0,b.jsx)(d.n,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:a,onUnmountAutoFocus:n,children:(0,b.jsx)(l.qW,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:h,onEscapeKeyDown:c,onPointerDownOutside:p,onFocusOutside:x,onDismiss:()=>v.onOpenChange(!1),children:(0,b.jsx)(u.UC,{"data-state":T(v.open),role:"dialog",id:v.contentId,...m,...f,ref:r,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),W="PopoverClose";function T(e){return e?"open":"closed"}o.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,n=k(W,t);return(0,b.jsx)(h.sG.button,{type:"button",...o,ref:r,onClick:(0,a.m)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=W,o.forwardRef((e,r)=>{let{__scopePopover:t,...o}=e,a=y(t);return(0,b.jsx)(u.i3,{...a,...o,ref:r})}).displayName="PopoverArrow";var Z=A,B=O,K=E,Q=I,G=D},29457:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var o=t(95155),a=t(71873),n=t(87239),s=t(93047),l=t(32825),i=t(4988),d=t(28755),c=t(34301),u=t(12115);let p=()=>{let[e,r]=(0,u.useState)(!1),t=()=>r(e=>!e),p=(0,i.Nu)(),[x,h]=(0,u.useState)(""),{data:f=[]}=(0,d.I)({queryKey:["contragents",x],queryFn:()=>(0,a.WU)(x),enabled:p});return(0,u.useEffect)(()=>{"#add_contractor"===window.location.hash&&r(!0)},[]),(0,u.useEffect)(()=>{e?window.history.replaceState(null,"","#add_contractor"):window.history.replaceState(null,"",window.location.pathname+window.location.search)},[e]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"relative mb-[33px]",children:[(0,o.jsx)("input",{type:"text",placeholder:"Поиск контрагента",className:" w-full h-[41px] px-3 border border-superSilver hover:border-cerulean/70 focus:outline-none focus:ring-1 focus:ring-cerulean focus:border-transparent transition",value:x,onChange:e=>h(e.target.value)}),(0,o.jsx)("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,o.jsx)(n.WI,{})})]}),(0,o.jsxs)("div",{className:"grid grid-cols-4 border-b border-superSilver pb-8 gap-[22px] w-full ",children:[(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsxs)("button",{type:"button",onClick:t,className:" min-h-[229px]  cursor-pointer bg-custom border border-dashed  border-superSilver flex justify-center items-center flex-col gap-2",children:[(0,o.jsx)(c.A,{className:"text-weekColor w-10 h-10"}),(0,o.jsx)("p",{className:"text-weekColor mt-2",children:"Добавить контрагенты"})]})}),(0,o.jsx)(s.I,{contrAgents:(null==f?void 0:f.kontragents)||[]})]}),(0,o.jsx)(l.vm,{isOpen:e,toggleOpen:t})]})}},34301:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});let o=(0,t(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},40157:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var o=t(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,o.forwardRef)((e,r)=>{let{color:t="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...p}=e;return(0,o.createElement)("svg",{ref:r,...s,width:a,height:a,stroke:t,strokeWidth:i?24*Number(l)/Number(a):l,className:n("lucide",d),...p},[...u.map(e=>{let[r,t]=e;return(0,o.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),i=(e,r)=>{let t=(0,o.forwardRef)((t,s)=>{let{className:i,...d}=t;return(0,o.createElement)(l,{ref:s,iconNode:r,className:n("lucide-".concat(a(e)),i),...d})});return t.displayName="".concat(e),t}},52046:(e,r,t)=>{Promise.resolve().then(t.bind(t,29457))},93047:(e,r,t)=>{"use strict";t.d(r,{I:()=>f});var o=t(95155),a=t(12115),n=t(26715),s=t(71873),l=t(87239),i=t(93473),d=t(14636),c=t(96834),u=t(57141),p=t(32825),x=t(59434),h=t(7114);let f=(0,a.memo)(e=>{let{contrAgents:r,setValue:t,className:f}=e,[v,m]=(0,a.useState)(!1),g=()=>m(!v),b=(0,h.A)(e=>e.setAgent),[w,j]=(0,a.useState)(null),[C,y]=(0,a.useState)(""),[N,k]=(0,a.useState)([]),A=(0,n.jE)();(0,a.useEffect)(()=>{let e=r.find(e=>e.isFavorite);e&&t&&t("kontragentId",e.id),e&&b(e.id)},[r,t,b]);let P=async e=>{try{await (0,s.x4)(e),A.invalidateQueries({queryKey:["contragents"]}),t&&t("kontragentId",e),b(e)}catch(e){console.error(e),(0,i.Qg)("Ошибка обновления контрагента")}},O=async e=>{try{await c.A.delete("".concat(u.kt,"/").concat(e)),A.invalidateQueries({queryKey:["contragents"]}),(0,i.Te)("Контрагент удален")}catch(e){console.error(e),(0,i.Qg)("Ошибка удаления контрагента")}},R=(e,r,t)=>{k(e),j(r),y(t),m(!0)};return(0,o.jsx)(o.Fragment,{children:null==r?void 0:r.slice().sort((e,r)=>!!r.isFavorite-!!e.isFavorite).map(e=>(0,o.jsxs)("div",{className:(0,x.cn)("border ".concat(e.isFavorite?"border-cerulean":"border-superSilver"," relative pt-12 px-4 overflow-hidden bg-custom min-h-[229px]"),f),children:[(0,o.jsxs)("div",{className:"mb-[15px]",children:[(0,o.jsx)("h5",{className:"text-textColor text-sm mb-2",children:e.name}),(0,o.jsxs)("p",{className:"text-weekColor text-xs",children:["ИНН ",e.inn]})]}),(0,o.jsxs)("div",{className:"gap-2 flex mb-2",children:[(0,o.jsx)("span",{className:"border-b border-dashed pb-[2px] text-xs text-cerulean border-cerulean",children:"Розничная цена"}),(0,o.jsxs)("span",{onClick:()=>R(e.address,e.id,e.name),className:"border-b border-dashed pb-[2px] text-xs text-cerulean border-cerulean cursor-pointer",children:["Адреса отгрузки:\xa0",e.address.length]})]}),(0,o.jsxs)("button",{type:"button",onClick:()=>P(e.id),disabled:e.isFavorite,className:"mt-[31px] flex gap-3 items-center px-[23px] text-weekColor h-[42px] border disabled:bg-cerulean disabled:text-white disabled:border-none",children:[(0,o.jsx)(l.Sr,{}),e.isFavorite?"Выбрано":"Выбрать"]}),(0,o.jsxs)(d.AM,{children:[(0,o.jsx)(d.Wv,{asChild:!0,children:(0,o.jsx)("button",{type:"button",className:"absolute top-4 right-2 cursor-pointer w-fit",children:(0,o.jsx)(l.qU,{className:"w-6 h-6 text-darkSoul hover:text-textColor"})})}),(0,o.jsxs)(d.hl,{className:"w-[200px] p-0 rounded-none flex flex-col right-5 absolute",children:[(0,o.jsxs)("span",{onClick:()=>R(e.address,e.id,e.name),className:"cursor-pointer py-[6px] px-4 bg-white text-xs text-textColor hover:bg-superSilver hoverEffect flex items-center gap-2",children:[(0,o.jsx)("span",{children:(0,o.jsx)(l.Sp,{})}),"Адреса отгрузки:\xa0",e.address.length]}),(0,o.jsxs)("span",{onClick:()=>O(e.id),className:"cursor-pointer py-[6px] px-4 bg-white text-xs text-textColor hover:bg-superSilver hoverEffect flex items-center gap-2",children:[(0,o.jsx)("span",{className:"w-4 h-4",children:(0,o.jsx)(l.XA,{className:"w-4 h-4"})}),"Удалить"]})]})]}),(0,o.jsx)(p.h2,{isOpen:v,toggleOpen:g,name:C,contrAgentId:w||"",element:N},w)]},e.id))})});f.displayName="ContrAgent"}},e=>{var r=r=>e(e.s=r);e.O(0,[4277,6874,3568,5165,65,5106,4856,8410,1342,4443,7766,7239,3671,1428,8441,1684,7358],()=>r(52046)),_N_E=e.O()}]);