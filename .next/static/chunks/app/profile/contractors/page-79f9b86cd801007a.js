(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8715],{52046:(e,t,r)=>{Promise.resolve().then(r.bind(r,68536))},68536:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(95155),a=r(89033),o=r(48999),n=r(1734),l=r(29516),i=r(11349),d=r(62335),c=r(45910),x=r(12115);let u=()=>{let[e,t]=(0,x.useState)(!1),r=()=>t(e=>!e),u=(0,i.Nu)(),[p,h]=(0,x.useState)(""),{data:m=[]}=(0,d.I)({queryKey:["contragents",p],queryFn:()=>(0,a.WU)(p),enabled:u});return(0,x.useEffect)(()=>{"#add_contractor"===window.location.hash&&t(!0)},[]),(0,x.useEffect)(()=>{e?window.history.replaceState(null,"","#add_contractor"):window.history.replaceState(null,"",window.location.pathname+window.location.search)},[e]),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"relative mb-[33px]",children:[(0,s.jsx)("input",{type:"text",placeholder:"Поиск контрагента",className:" w-full h-[41px] px-3 border border-superSilver hover:border-cerulean/70 focus:outline-none focus:ring-1 focus:ring-cerulean focus:border-transparent transition",value:p,onChange:e=>h(e.target.value)}),(0,s.jsx)("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)(o.WI,{})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 border-b border-superSilver pb-8 gap-[22px] w-full ",children:[(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsxs)("button",{type:"button",onClick:r,className:" min-h-[229px]  cursor-pointer bg-custom border border-dashed  border-superSilver flex justify-center items-center flex-col gap-2",children:[(0,s.jsx)(c.A,{className:"text-weekColor w-10 h-10"}),(0,s.jsx)("p",{className:"text-weekColor mt-2",children:"Добавить контрагенты"})]})}),(0,s.jsx)(n.I,{contrAgents:(null==m?void 0:m.kontragents)||[]})]}),(0,s.jsx)(l.vm,{isOpen:e,toggleOpen:r})]})}},1734:(e,t,r)=>{"use strict";r.d(t,{I:()=>m});var s=r(95155),a=r(12115),o=r(35906),n=r(89033),l=r(48999),i=r(11644),d=r(89095),c=r(74857),x=r(93952),u=r(29516),p=r(21567),h=r(12527);let m=(0,a.memo)(e=>{let{contrAgents:t,setValue:r,className:m}=e,[b,f]=(0,a.useState)(!1),g=()=>f(!b),v=(0,h.A)(e=>e.setAgent),[w,j]=(0,a.useState)(null),[N,y]=(0,a.useState)(""),[k,C]=(0,a.useState)([]),A=(0,o.jE)();(0,a.useEffect)(()=>{let e=t.find(e=>e.isFavorite);e&&r&&r("kontragentId",e.id),e&&v(e.id)},[t,r,v]);let S=async e=>{try{await (0,n.x4)(e),A.invalidateQueries({queryKey:["contragents"]}),r&&r("kontragentId",e),v(e)}catch(e){console.error(e),(0,i.Qg)("Ошибка обновления контрагента")}},E=async e=>{try{await c.A.delete("".concat(x.kt,"/").concat(e)),A.invalidateQueries({queryKey:["contragents"]}),(0,i.Te)("Контрагент удален")}catch(e){console.error(e),(0,i.Qg)("Ошибка удаления контрагента")}},F=(e,t,r)=>{C(e),j(t),y(r),f(!0)};return(0,s.jsx)(s.Fragment,{children:null==t?void 0:t.slice().sort((e,t)=>(t.isFavorite?1:0)-(e.isFavorite?1:0)).map(e=>(0,s.jsxs)("div",{className:(0,p.cn)("border ".concat(e.isFavorite?"border-cerulean":"border-superSilver"," relative pt-12 px-4 overflow-hidden bg-custom min-h-[229px]"),m),children:[(0,s.jsxs)("div",{className:"mb-[15px]",children:[(0,s.jsx)("h5",{className:"text-textColor text-sm mb-2",children:e.name}),(0,s.jsxs)("p",{className:"text-weekColor text-xs",children:["ИНН ",e.inn]})]}),(0,s.jsxs)("div",{className:"gap-2 flex mb-2",children:[(0,s.jsx)("span",{className:"border-b border-dashed pb-[2px] text-xs text-cerulean border-cerulean",children:"Розничная цена"}),(0,s.jsxs)("span",{onClick:()=>F(e.address,e.id,e.name),className:"border-b border-dashed pb-[2px] text-xs text-cerulean border-cerulean cursor-pointer",children:["Адреса отгрузки:\xa0",e.address.length]})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>S(e.id),disabled:e.isFavorite,className:"mt-[31px] flex gap-3 items-center px-[23px] text-weekColor h-[42px] border disabled:bg-cerulean disabled:text-white disabled:border-none",children:[(0,s.jsx)(l.Sr,{}),e.isFavorite?"Выбрано":"Выбрать"]}),(0,s.jsxs)(d.AM,{children:[(0,s.jsx)(d.Wv,{asChild:!0,children:(0,s.jsx)("button",{type:"button",className:"absolute top-4 right-2 cursor-pointer w-fit",children:(0,s.jsx)(l.qU,{className:"w-6 h-6 text-darkSoul hover:text-textColor"})})}),(0,s.jsxs)(d.hl,{className:"w-[200px] p-0 rounded-none flex flex-col right-5 absolute",children:[(0,s.jsxs)("span",{onClick:()=>F(e.address,e.id,e.name),className:"cursor-pointer py-[6px] px-4 bg-white text-xs text-textColor hover:bg-superSilver hoverEffect flex items-center gap-2",children:[(0,s.jsx)("span",{children:(0,s.jsx)(l.Sp,{})}),"Адреса отгрузки:\xa0",e.address.length]}),(0,s.jsxs)("span",{onClick:()=>E(e.id),className:"cursor-pointer py-[6px] px-4 bg-white text-xs text-textColor hover:bg-superSilver hoverEffect flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-4 h-4",children:(0,s.jsx)(l.XA,{className:"w-4 h-4"})}),"Удалить"]})]})]}),(0,s.jsx)(u.h2,{isOpen:b,toggleOpen:g,name:N,contrAgentId:w||"",element:k},w)]},e.id))})});m.displayName="ContrAgent"},89095:(e,t,r)=>{"use strict";r.d(t,{AM:()=>l,Wv:()=>i,hl:()=>d});var s=r(95155),a=r(12115),o=r(39774),n=r(21567);let l=o.bL,i=o.l9;o.Mz;let d=a.forwardRef((e,t)=>{let{className:r,align:a="center",sideOffset:l=4,...i}=e;return(0,s.jsx)(o.ZL,{children:(0,s.jsx)(o.UC,{ref:t,align:a,sideOffset:l,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...i})})});d.displayName=o.UC.displayName},14057:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(12115);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:x,...u}=e;return(0,s.createElement)("svg",{ref:t,...n,width:a,height:a,stroke:r,strokeWidth:i?24*Number(l)/Number(a):l,className:o("lucide",d),...u},[...x.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{className:i,...d}=r;return(0,s.createElement)(l,{ref:n,iconNode:t,className:o("lucide-".concat(a(e)),i),...d})});return r.displayName="".concat(e),r}},45910:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(14057).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[1181,8173,5037,3194,1387,8125,9795,7245,40,6443,2430,9774,8999,428,2462,8441,1517,7358],()=>t(52046)),_N_E=e.O()}]);