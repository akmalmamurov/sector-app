(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1216],{3877:(e,t,r)=>{Promise.resolve().then(r.bind(r,38864))},4988:(e,t,r)=>{"use strict";r.d(t,{nu:()=>i,vL:()=>d,fl:()=>s,Nu:()=>u,YU:()=>x});var l=r(12115);let s=()=>{let[e,t]=(0,l.useState)(!1),[r,s]=(0,l.useState)(""),[a,n]=(0,l.useState)(null);return{isOpen:e,message:r,openModal:(e,r)=>{s(e),n(()=>r),t(!0)},closeModal:()=>{t(!1),n(null)},onConfirm:a}};var a=r(93473),n=r(7114);function d(e){let[t,r]=(0,l.useState)(!1),[s,d]=(0,l.useState)(()=>null==e?void 0:e.map(e=>e.id)),[o,i]=(0,l.useState)(null==e?void 0:e.length),{auth:c,clearDataAfterTimeout:u}=(0,n.A)(),x=(0,l.useRef)(!1);(0,l.useEffect)(()=>{r(!0)},[]),(0,l.useEffect)(()=>{!1===c&&u()},[c,u]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{!1!==c||x.current||((0,a.Qg)("Вы не авторизованы, рекомендуем авторизоваться"),x.current=!0)},500);return()=>clearTimeout(e)},[c]),(0,l.useEffect)(()=>{(null==e?void 0:e.length)!==o&&(d(null==e?void 0:e.map(e=>e.id)),i(null==e?void 0:e.length))},[e,o]);let p=(null==e?void 0:e.length)>0&&(null==s?void 0:s.length)===(null==e?void 0:e.length),m=null==e?void 0:e.filter(e=>null==s?void 0:s.includes(e.id));return{isClient:t,selectedItems:s,toggleAllItems:()=>{d(t=>(null==t?void 0:t.length)===(null==e?void 0:e.length)?[]:null==e?void 0:e.map(e=>e.id))},toggleSingleItem:e=>{d(t=>(null==t?void 0:t.includes(e))?t.filter(t=>t!==e):[...t,e])},isAllChecked:p,selectedCards:m}}var o=r(47131);function i(e){let{cart:t,selectedItems:r,setValue:a,cartForm:n,resetCart:d,deleteCart:i}=e,c=(0,o.A)(e=>e.selectedGuarantees);(0,l.useEffect)(()=>{(null==n?void 0:n.city)&&a("city",n.city)},[null==n?void 0:n.city,a]),(0,l.useEffect)(()=>{let e=t.filter(e=>r.includes(e.id)),l=e.reduce((e,t)=>e+t.price*(t.count||1),0);a("productDetails",e.map(e=>{var t,r;return{productId:e.id,count:null!=(t=e.count)?t:0,garanteeId:null!=(r=c[e.id])?r:"0"}})),a("total",l)},[r,t,a,c]);let{isOpen:u,message:x,openModal:p,closeModal:m,onConfirm:h}=s();return{isConfirmOpen:u,message:x,onConfirm:h,closeModal:m,handleDeleteAll:()=>{p("Вы уверены, что хотите удалить все товары из корзины?",()=>d())},handleDeleteClick:e=>{p("Вы уверены, что хотите удалить товар из корзины?",()=>i(e))}}}var c=r(35695);function u(){let{auth:e,isHydrated:t}=(0,n.A)(),r=(0,c.useRouter)();return(0,l.useEffect)(()=>{t&&(e||r.replace("/"))},[e,t,r]),e}function x(){let[e,t]=(0,l.useState)("up"),r=(0,l.useRef)(0);return(0,l.useEffect)(()=>{r.current=window.scrollY;let e=()=>{let e=window.scrollY;t(e>r.current?"down":"up"),r.current=e};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),e}},35695:(e,t,r)=>{"use strict";var l=r(18999);r.o(l,"usePathname")&&r.d(t,{usePathname:function(){return l.usePathname}}),r.o(l,"useRouter")&&r.d(t,{useRouter:function(){return l.useRouter}}),r.o(l,"useSearchParams")&&r.d(t,{useSearchParams:function(){return l.useSearchParams}})},38864:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var l=r(95155),s=r(12115),a=r(4988),n=r(28755),d=r(71873),o=r(7114),i=r(6874),c=r.n(i),u=r(79556),x=r(75943);let p=e=>(0,l.jsx)("svg",{width:25,height:25,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.92969 12.1501C2.92969 17.6729 7.40684 22.1501 12.9297 22.1501C18.4525 22.1501 22.9297 17.6729 22.9297 12.1501C22.9297 6.6273 18.4525 2.15015 12.9297 2.15015C7.40684 2.15015 2.92969 6.6273 2.92969 12.1501ZM20.9297 12.1501C20.9297 16.5684 17.348 20.1501 12.9297 20.1501C8.51141 20.1501 4.92969 16.5684 4.92969 12.1501C4.92969 7.73187 8.51141 4.15015 12.9297 4.15015C17.348 4.15015 20.9297 7.73187 20.9297 12.1501ZM11.9297 12.0072C11.9297 11.5339 12.3774 11.1501 12.9297 11.1501C13.482 11.1501 13.9297 11.5339 13.9297 12.0072V16.293C13.9297 16.7663 13.482 17.1501 12.9297 17.1501C12.3774 17.1501 11.9297 16.7663 11.9297 16.293V12.0072ZM13.9297 8.15015C13.9297 8.70243 13.482 9.15015 12.9297 9.15015C12.3774 9.15015 11.9297 8.70243 11.9297 8.15015C11.9297 7.59787 12.3774 7.15015 12.9297 7.15015C13.482 7.15015 13.9297 7.59787 13.9297 8.15015Z",fill:"#333333"})});var m=r(85127),h=r(22073),f=r(67995),v=r(87239),b=r(14636),j=r(26715),g=r(93473),N=r(96834),y=r(57141);let w=e=>{let{orders:t}=e,[r,a]=(0,s.useState)(null),[n,d]=(0,s.useState)(null),o=(0,j.jE)(),i=(0,s.useMemo)(()=>r?t.slice().sort((e,t)=>"asc"===r?Number(e.total)-Number(t.total):Number(t.total)-Number(e.total)):t,[t,r]);console.log(t);let w=async e=>{try{await N.A.patch("".concat(y.Ws,"/").concat(e),{orderType:"rejected"}),(0,g.Te)("Заказ отменен"),d(null),o.invalidateQueries({queryKey:["orders"]})}catch(e){(0,g.Qg)("При отмене заказа произошла ошибка"),console.log(e)}};return(0,l.jsxs)(m.XI,{className:"w-full table-auto bg-white border-separate border-spacing-y-2",children:[(0,l.jsx)(m.A0,{children:(0,l.jsxs)(m.Hj,{className:"bg-whiteOut text-center border border-gray-200",children:[(0,l.jsxs)(m.nd,{className:"px-[10px] py-[7px] text-center border border-superSilver text-sm leading-[21px] text-textColor relative",children:[(0,l.jsx)("span",{children:"Заказы"}),(0,l.jsx)(u.A,{className:"w-[16px] h-[16px] absolute right-3 top-1/2 -translate-y-1/2"})]}),(0,l.jsxs)(m.nd,{className:"px-[10px] py-[7px] text-center border border-superSilver text-sm leading-[21px] text-textColor relative",children:[(0,l.jsx)("span",{children:"Контрагент"}),(0,l.jsx)(u.A,{className:"w-[16px] h-[16px] absolute right-3 top-1/2 -translate-y-1/2"})]}),(0,l.jsx)(m.nd,{className:"px-[10px] py-[7px] text-center border border-superSilver text-sm leading-[21px] text-textColor relative",children:"Доставка"}),(0,l.jsx)(m.nd,{className:"px-[10px] py-[7px] text-center border border-superSilver text-sm leading-[21px] text-textColor relative",children:"Статус оплаты"}),(0,l.jsxs)(m.nd,{className:"px-[10px] py-[7px] text-center border border-superSilver text-sm leading-[21px] text-textColor relative",children:[(0,l.jsx)("span",{children:"Сумма"}),(0,l.jsxs)("div",{className:" absolute right-3 top-1/2 -translate-y-1/2 flex flex-col justify-center gap-[3px]",children:[(0,l.jsx)("button",{onClick:()=>a("asc"),children:(0,l.jsx)(v.SV,{})}),(0,l.jsx)("button",{onClick:()=>a("desc"),children:(0,l.jsx)(v.tH,{})})]})]}),(0,l.jsx)(m.nd,{className:"px-[10px] py-[7px] text-end border border-superSilver  text-textColor relative"})]})}),(0,l.jsx)(m.BF,{children:i&&(null==i?void 0:i.length)>0?null==i?void 0:i.map((e,t)=>{var r;return(0,l.jsxs)(m.Hj,{className:"",children:[(0,l.jsx)(m.nA,{className:"py-[7px] px-[10px] border-l border-t border-b lg:w-[189px]",children:(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,l.jsx)(c(),{href:"/profile/orders/".concat(null==e?void 0:e.id),className:"py-[6px] px-[17px] border",children:null==e?void 0:e.orderNumber}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["от ",(0,h.Yq)(null==e?void 0:e.validStartDate)]})})]})})}),(0,l.jsx)(m.nA,{className:"py-[7px] px-[10px]  border-t border-b lg:w-[328px]",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:(0,l.jsx)(p,{})}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("span",{children:null==e?void 0:e.kontragentName}),(0,l.jsxs)("span",{children:["ИНН ",null==e||null==(r=e.kontragent)?void 0:r.inn]})]})]})}),(0,l.jsx)(m.nA,{className:"py-[7px] px-[10px]  border-t border-b lg:w-[265px]",children:(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)("p",{children:"Прочее"}),(0,l.jsx)("span",{className:"border-b border-dashed border-cerulean text-cerulean w-fit",children:"Статус: Не отгружен"})]})}),(0,l.jsx)(m.nA,{className:"py-[7px] px-[10px]  border-t border-b lg:w-[220px]",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,l.jsx)("div",{className:"border border-dangerColor w-full flex justify-center items-center h-[30px] rounded-[4px] text-dangerColor text-sm",children:null==e?void 0:e.orderPriceStatus}),(0,l.jsx)("div",{children:(0,l.jsxs)("p",{children:["Оплатить до ",(0,h.Yq)(null==e?void 0:e.validEndDate)]})})]})}),(0,l.jsx)(m.nA,{className:"py-[7px] px-[10px]  border-t border-b",children:(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-darkSoul text-xs leading-[18px]",children:"UZS"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(f.A,{amount:Number(null==e?void 0:e.total),className:"text-sm font-normal leading-[21px] text-end"}),(0,l.jsxs)("p",{className:"text-pelati text-xs",children:["К оплате ",(0,h.$g)(Number(null==e?void 0:e.total))]})]})]})}),(0,l.jsx)(m.nA,{className:"py-[7px] px-[10px]  border-t border-b text-center border-r",children:(0,l.jsx)("div",{className:"cursor-pointer flex justify-center",children:(0,l.jsxs)(b.AM,{open:n===t,onOpenChange:e=>d(e?t:null),children:[(0,l.jsx)(b.Wv,{asChild:!0,children:(0,l.jsx)("button",{type:"button",children:(0,l.jsx)(v.qU,{className:"rotate-[90deg] text-darkSoul"})})}),(0,l.jsxs)(b.hl,{className:"w-[149px] p-0 rounded-none overflow-hidden",children:[(0,l.jsx)("li",{className:"py-[6px] px-4 bg-white hover:bg-superSilver duration-150 ease-in-out list-none",children:(0,l.jsxs)(c(),{href:"/profile/orders/".concat(null==e?void 0:e.id),className:"text-xs flex items-center gap-2",children:[(0,l.jsx)("span",{children:(0,l.jsx)(x.A,{className:"w-[13px] h-[13px]"})}),"Перейти в заказ"]})}),"rejected"!==e.orderType&&(0,l.jsx)("li",{className:"py-[6px] px-4 bg-white hover:bg-superSilver duration-150 ease-in-out list-none",children:(0,l.jsxs)("button",{type:"button",onClick:()=>w(null==e?void 0:e.id),className:"text-xs flex items-center gap-2 text-pelati",children:[(0,l.jsx)("span",{children:(0,l.jsx)(v.d7,{className:"w-[13px] h-[13px] text-pelati"})}),"Отменить"]})})]})]})})})]},null==e?void 0:e.id)}):null})]})};var C=r(74323),S=r(32231);let A=()=>{let e=(0,o.A)(e=>e.auth),[t,r]=(0,s.useState)(null),[i,c]=(0,s.useState)(null),[u,x]=(0,s.useState)(null),[p,m]=(0,s.useState)(null);(0,a.Nu)();let[h,f]=(0,s.useState)(void 0),[v,b]=(0,s.useState)(void 0),[j,g]=(0,s.useState)(""),{data:N,isLoading:y}=(0,n.I)({queryKey:["orders",t,i,u,p,h,v,j],queryFn:()=>(0,d.WF)(t,i,u,p,h,v,j),enabled:e}),{data:A=[]}=(0,n.I)({queryKey:["contragents"],queryFn:()=>(0,d.WU)(),enabled:e}),k=(null==A?void 0:A.user_kontragents)||[];return(0,l.jsxs)("div",{className:"pt-5 pb-10",children:[(0,l.jsx)(S.w,{props:{setKontragentName:r,setOrderPriceStatus:c,setOrderDeleveryType:x,setOrderType:m,setOrderNumber:g,setPeriodStart:f,setPeriodEnd:b,periodEnd:v,periodStart:h,contrAgents:k}}),(0,l.jsx)("div",{style:{scrollbarWidth:"none",msOverflowStyle:"none"},className:"w-full overflow-x-auto",children:y?(0,l.jsx)("div",{className:"fixed top-[189px] left-0 right-0 w-screen z-50",children:(0,l.jsx)("div",{className:"container mx-auto relative",children:(0,l.jsx)(C.default,{className:"h-1 w-full"})})}):(0,l.jsx)(w,{orders:null==N?void 0:N.orders})})]})}},40157:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var l=r(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,l.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:i="",children:c,iconNode:u,...x}=e;return(0,l.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:o?24*Number(d)/Number(s):d,className:a("lucide",i),...x},[...u.map(e=>{let[t,r]=e;return(0,l.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,l.forwardRef)((r,n)=>{let{className:o,...i}=r;return(0,l.createElement)(d,{ref:n,iconNode:t,className:a("lucide-".concat(s(e)),o),...i})});return r.displayName="".concat(e),r}},47131:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var l=r(65453),s=r(46786);let a=(0,l.v)()((0,s.Zr)(e=>({cartForm:null,contactForm:null,deliveryForm:null,garanteePrice:null,selectedGuarantees:{},addCartForm:t=>e({cartForm:t}),addContactForm:t=>e({contactForm:t}),addDeliveryForm:t=>e({deliveryForm:t}),addGaranteePrice:t=>e({garanteePrice:t}),setSelectedGuarantee:(t,r)=>e(e=>({selectedGuarantees:{...e.selectedGuarantees,[t]:r}}))}),{name:"sfeo-mtr",storage:(0,s.KU)(()=>sessionStorage)}))},74323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var l=r(95155),s=r(59434);let a=e=>{let{className:t}=e;return(0,l.jsx)("div",{className:(0,s.cn)("absolute left-0 right-0 top-0 inset-x-0 h-1 z-50",t),children:(0,l.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-blue-500 via-purple-600 to-purple-500 animate-cart-loading"})})}},75943:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(40157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},85127:(e,t,r)=>{"use strict";r.d(t,{A0:()=>d,BF:()=>o,Hj:()=>i,XI:()=>n,nA:()=>u,nd:()=>c});var l=r(95155),s=r(12115),a=r(59434);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...s})})});n.displayName="Table";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...s})});d.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});i.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)("th",{ref:t,className:(0,a.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)("td",{ref:t,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,l.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,6874,3568,5165,65,5106,4856,5716,7239,3671,2231,8441,1684,7358],()=>t(3877)),_N_E=e.O()}]);