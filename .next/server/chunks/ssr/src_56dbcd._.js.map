{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/project/sector-app/src/hooks/useConfirmModal.ts"],"sourcesContent":["import { useState } from \"react\";\r\n\r\nexport const useConfirmModal = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [onConfirm, setOnConfirm] = useState<(() => void) | null>(null);\r\n\r\n  const openModal = (message: string, onConfirmAction: () => void) => {\r\n    setMessage(message);\r\n    setOnConfirm(() => onConfirmAction);\r\n    setIsOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsOpen(false);\r\n    setOnConfirm(null);\r\n  };\r\n\r\n  return { isOpen, message, openModal, closeModal, onConfirm };\r\n};\r\n"],"names":[],"mappings":";;;AAAA;;AAEO,MAAM,kBAAkB;IAC7B,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuB;IAEhE,MAAM,YAAY,CAAC,SAAiB;QAClC,WAAW;QACX,aAAa,IAAM;QACnB,UAAU;IACZ;IAEA,MAAM,aAAa;QACjB,UAAU;QACV,aAAa;IACf;IAEA,OAAO;QAAE;QAAQ;QAAS;QAAW;QAAY;IAAU;AAC7D"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://D%3A/project/sector-app/src/hooks/cart-logic/useCart.ts"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { showError } from \"@/components/toast/Toast\";\r\nimport useStore from \"@/context/store\";\r\nimport { ProductData } from \"@/types\";\r\n\r\nexport function useCartPage(initialCart: ProductData[]) {\r\n  const [isClient, setIsClient] = useState(false);\r\n  const [selectedItems, setSelectedItems] = useState<string[]>(() =>\r\n    initialCart?.map((item) => item.id)\r\n  );\r\n  const [prevCartLength, setPrevCartLength] = useState(initialCart?.length);\r\n\r\n  const { auth, clearDataAfterTimeout } = useStore();\r\n  const authErrorShown = useRef(false);\r\n\r\n  useEffect(() => {\r\n    setIsClient(true);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (auth === false) {\r\n      clearDataAfterTimeout();\r\n    }\r\n  }, [auth, clearDataAfterTimeout]);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      if (auth === false && !authErrorShown.current) {\r\n        showError(\"Вы не авторизованы, рекомендуем авторизоваться\");\r\n        authErrorShown.current = true;\r\n      }\r\n    }, 500);\r\n    return () => clearTimeout(timer);\r\n  }, [auth]);\r\n\r\n  useEffect(() => {\r\n    if (initialCart?.length !== prevCartLength) {\r\n      setSelectedItems(initialCart?.map((i) => i.id));\r\n      setPrevCartLength(initialCart?.length);\r\n    }\r\n  }, [initialCart, prevCartLength]);\r\n\r\n  const toggleAllItems = () => {\r\n    setSelectedItems((prev) =>\r\n      prev?.length === initialCart?.length ? [] : initialCart?.map((i) => i.id)\r\n    );\r\n  };\r\n\r\n  const toggleSingleItem = (id: string) => {\r\n    setSelectedItems((prev) =>\r\n      prev?.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  const isAllChecked =\r\n    initialCart?.length > 0 && selectedItems?.length === initialCart?.length;\r\n\r\n  const selectedCards = initialCart?.filter((item) =>\r\n    selectedItems?.includes(item.id)\r\n  );\r\n\r\n  return {\r\n    isClient,\r\n    selectedItems,\r\n    toggleAllItems,\r\n    toggleSingleItem,\r\n    isAllChecked,\r\n    selectedCards,\r\n  } as const;\r\n}\r\n"],"names":[],"mappings":";;;AACA;AACA;AACA;AAHA;;;;AAMO,SAAS,YAAY,WAA0B;IACpD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,IAC3D,aAAa,IAAI,CAAC,OAAS,KAAK,EAAE;IAEpC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,aAAa;IAElE,MAAM,EAAE,IAAI,EAAE,qBAAqB,EAAE,GAAG,CAAA,GAAA,uHAAA,CAAA,UAAQ,AAAD;IAC/C,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAE;IAE9B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,YAAY;IACd,GAAG,EAAE;IAEL,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,SAAS,OAAO;YAClB;QACF;IACF,GAAG;QAAC;QAAM;KAAsB;IAEhC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,QAAQ,WAAW;YACvB,IAAI,SAAS,SAAS,CAAC,eAAe,OAAO,EAAE;gBAC7C,CAAA,GAAA,oIAAA,CAAA,YAAS,AAAD,EAAE;gBACV,eAAe,OAAO,GAAG;YAC3B;QACF,GAAG;QACH,OAAO,IAAM,aAAa;IAC5B,GAAG;QAAC;KAAK;IAET,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,aAAa,WAAW,gBAAgB;YAC1C,iBAAiB,aAAa,IAAI,CAAC,IAAM,EAAE,EAAE;YAC7C,kBAAkB,aAAa;QACjC;IACF,GAAG;QAAC;QAAa;KAAe;IAEhC,MAAM,iBAAiB;QACrB,iBAAiB,CAAC,OAChB,MAAM,WAAW,aAAa,SAAS,EAAE,GAAG,aAAa,IAAI,CAAC,IAAM,EAAE,EAAE;IAE5E;IAEA,MAAM,mBAAmB,CAAC;QACxB,iBAAiB,CAAC,OAChB,MAAM,SAAS,MAAM,KAAK,MAAM,CAAC,CAAC,IAAM,MAAM,MAAM;mBAAI;gBAAM;aAAG;IAErE;IAEA,MAAM,eACJ,aAAa,SAAS,KAAK,eAAe,WAAW,aAAa;IAEpE,MAAM,gBAAgB,aAAa,OAAO,CAAC,OACzC,eAAe,SAAS,KAAK,EAAE;IAGjC,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file://D%3A/project/sector-app/src/hooks/cart-logic/cart-left.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useConfirmModal } from \"@/hooks/useConfirmModal\";\r\nimport type { StoreItem } from \"@/context/store\";\r\nimport type { UseFormSetValue } from \"react-hook-form\";\r\nimport type { OrderRequest } from \"@/types\";\r\nimport type { CartState } from \"@/context/form-store\";\r\n\r\ninterface Params {\r\n  cart: StoreItem[];\r\n  selectedItems: string[];\r\n  setValue: UseFormSetValue<OrderRequest>;\r\n  cartForm: CartState | null;\r\n  resetCart: () => void;\r\n  deleteCart: (id: string) => void;\r\n}\r\n\r\nexport function useCartLeft({ cart, selectedItems, setValue, cartForm, resetCart, deleteCart, }: Params) {\r\n  useEffect(() => {\r\n    if (cartForm?.city) {\r\n      setValue(\"city\", cartForm.city);\r\n    }\r\n  }, [cartForm?.city, setValue]);\r\n\r\n  useEffect(() => {\r\n    const selectedProducts = cart.filter((item) =>\r\n      selectedItems.includes(item.id)\r\n    );\r\n    const total = selectedProducts.reduce(\r\n      (sum, item) => sum + (item.price || 0) * (item.count || 1),\r\n      0\r\n    );\r\n    setValue(\"products\", selectedItems);\r\n    setValue(\"total\", total);\r\n  }, [selectedItems, cart, setValue]);\r\n\r\n  const {\r\n    isOpen: isConfirmOpen,\r\n    message,\r\n    openModal,\r\n    closeModal,\r\n    onConfirm,\r\n  } = useConfirmModal();\r\n\r\n  const handleDeleteAll = () => {\r\n    openModal(\r\n      \"Вы уверены, что хотите удалить все товары из корзины?\",\r\n      () => resetCart()\r\n    );\r\n  };\r\n\r\n  const handleDeleteClick = (id: string) => {\r\n    openModal(\r\n      \"Вы уверены, что хотите удалить товар из корзины?\",\r\n      () => deleteCart(id)\r\n    );\r\n  };\r\n\r\n  return {\r\n    isConfirmOpen,\r\n    message,\r\n    onConfirm,\r\n    closeModal,\r\n    handleDeleteAll,\r\n    handleDeleteClick,\r\n  } as const;\r\n}\r\n"],"names":[],"mappings":";;;AAEA;AACA;AAHA;;;AAkBO,SAAS,YAAY,EAAE,IAAI,EAAE,aAAa,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAW;IACrG,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU,MAAM;YAClB,SAAS,QAAQ,SAAS,IAAI;QAChC;IACF,GAAG;QAAC,UAAU;QAAM;KAAS;IAE7B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,mBAAmB,KAAK,MAAM,CAAC,CAAC,OACpC,cAAc,QAAQ,CAAC,KAAK,EAAE;QAEhC,MAAM,QAAQ,iBAAiB,MAAM,CACnC,CAAC,KAAK,OAAS,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,GACzD;QAEF,SAAS,YAAY;QACrB,SAAS,SAAS;IACpB,GAAG;QAAC;QAAe;QAAM;KAAS;IAElC,MAAM,EACJ,QAAQ,aAAa,EACrB,OAAO,EACP,SAAS,EACT,UAAU,EACV,SAAS,EACV,GAAG,CAAA,GAAA,+HAAA,CAAA,kBAAe,AAAD;IAElB,MAAM,kBAAkB;QACtB,UACE,yDACA,IAAM;IAEV;IAEA,MAAM,oBAAoB,CAAC;QACzB,UACE,oDACA,IAAM,WAAW;IAErB;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file://D%3A/project/sector-app/src/hooks/useRequireAuth.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport useStore from \"@/context/store\";\r\n\r\nexport function useRequireAuth() {\r\n  const { auth, isHydrated } = useStore();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!isHydrated) return; \r\n\r\n    if (!auth) {\r\n      router.replace(\"/\");\r\n    }\r\n  }, [auth, isHydrated, router]);\r\n\r\n  return auth;\r\n}\r\n"],"names":[],"mappings":";;;AAEA;AACA;AACA;AAJA;;;;AAMO,SAAS;IACd,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,CAAA,GAAA,uHAAA,CAAA,UAAQ,AAAD;IACpC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,YAAY;QAEjB,IAAI,CAAC,MAAM;YACT,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;QAAM;QAAY;KAAO;IAE7B,OAAO;AACT"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}